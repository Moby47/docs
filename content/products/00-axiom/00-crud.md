---
title: "CRUD"
metaTitle: "Hypi Platform CRUD Documentation"
metaDescription: "Hypi platform documentation for the core app's CRUD operations generated for each app"
---

## Overview

The CRUD API in Hypi allows you to get data in and out of your apps.
The platform will generate some GraphQL types for you.

On this page we will use the following the GraphQL schema as an example.
```graphql
type Message {
    content: String!
    from: Account
    to: Account
}
```

## Generated types
Hypi will generate a number of GraphQL elements from this `Message` type.
Firstly, in GraphQL this is called an "output type". When working with GraphQL there is a distinction between the types you query and the types you use to insert data.
In Hypi, the input type and output type for the CRUD API has the same structure (same fields).

If you wish, you can use a different input structure for your custom APIs. The types currently generated by Hypi are:

### MessageInput
An input type which matches the output type you created, including required fields
```graphql
input MessageInput {
    hypi: HypiInput
    content: String!
    from: AccountInput
    to: AccountInput
}
```
### MessageInputOpt
An input type which matches the output type you created but **does not** keep the required properties you defined.
```graphql
input MessageInputOpt {
  hypi: HypiInputOpt
  content: String
  from: AccountInputOpt
  to: AccountInputOpt
}
```
### MessageAggs
An output type that is returned if you run an aggregation query over the `Message` data

```graphql
type MessageAggs {
  content: AggOtherScalar
}
```
Aggregations can be performed on scalar fields hence `content` is of type `AggOtherScalar`.
If your type has a numeric field such as `Int` or `Float` then instead of `AggOtherScalar` the generated field will have type `AggInt` or `AggFloat` respectively.
These are described in more details in the [aggregations API](/products/axiom/aggregations-api) documentation.

### MessageFields
An enum of the fields you defined in the `Message` type.
```graphql
enum MessageFields {
    hypi
    content
    from
    to
}
```

## Insert and update data

The first thing you may want to do once you create an instance is add some data.
In Hypi there is one function that is used for both inserting new data and updating existing ones called `upsert`.

```graphql
upsert(values: HypiUpsertInputUnion!): [Hypi!]!
```

Notice the argument `values` is plural because it allows you to create or update multiple values in a single request.
Its type, `HypiUpsertInputUnion` is automatically generated from the types in your app.
In this case it will look similar to this
```graphql
type HypiUpsertInputUnion {
  Message: [MessageInputOpt!]
  #...fields for other types here
  Account: [AccountInputOpt!]
}
```

In other words, `HypiUpsertInputUnion` has a field for every type in your app whether defined by you or inherited from an [app dependency](/products/axiom/app-dependencies).

### Insert Example
To add, you can use a query similar to the following

<div className={"code-container"}>

<div className={"code-column"}>

```
#GraphQL query
mutation Upsert($values: HypiUpsertInputUnion!) {
  upsert(values: $values) {
    id
  }
}

#GraphQL varibles
{
  "values": {
    "Message": [
      {
        "content": "This is example message 1"
      },
      {
        "content": "This is example message 2"
      }
    ]
  }
}
```
</div>
<div className={"code-column"}>

```json
{
  "data": {
    "upsert": [
      {
        "id": "01ED7DZ7JHDRGTWHS4GXKE17BT"
      },
      {
        "id": "01ED7DZ7JR2QF7M2KEPF99Z93Y"
      }
    ]
  }
}
```
</div>

</div>

### Update Example
To update data, you can use a query similar to the following. Notice that is is the same GraphQL query.
The difference is that the `hypi.id` field is provided.

<div className={"code-container"}>

<div className={"code-column"}>

```
#GraphQL query
mutation Upsert($values: HypiUpsertInputUnion!) {
  upsert(values: $values) {
    id
  }
}

#GraphQL varibles
{
  "values": {
    "Message": [
      {
        "hypi": {
          "id": "01ED7DZ7JHDRGTWHS4GXKE17BT"
        },
        "content": "This is example message 1 updated"
      },
      {
        "hypi": {
          "id": "01ED7DZ7JR2QF7M2KEPF99Z93Y"
        },
        "content": "This is example message 2 updated"
      }
    ]
  }
}
```
</div>
<div className={"code-column"}>

```json
{
  "data": {
    "upsert": [
      {
        "id": "01ED7DZ7JHDRGTWHS4GXKE17BT"
      },
      {
        "id": "01ED7DZ7JR2QF7M2KEPF99Z93Y"
      }
    ]
  }
}
```
</div>

</div>

> Keep in mind
>
> You are free to mix insert and update operations. The system will accept and process them correctly.
>
> The order of execution is **undefined**. Hypi can choose to process multiple requests sent in one query in parallel.
>
> There is a limit of 25 items per request
>
> There is a request timeout of 2 seconds within the entire operation must complete

